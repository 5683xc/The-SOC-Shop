#
# Install base of Ubuntu 18.04 minimal - Just select SSH as a package
#
sudo su
apt-get update && apt-get upgrade && apt-get dist-upgrade
#
# Dependencies
apt-get install php-xml php-cgi php-cli php-mysql php-mbstring php-gd php-curl php-zip
# Choose LEMP or LAMP stack - We'll go with LEMP for now
#
# LEMP stack
apt-get install mariadb-server nginx php-fpm php-mysql
#
# Version dependant so check with 'php --version' and change as required
systemctl start php7.2-fpm
systemctl enable php7.2-fpm
#
# Now secure DB
mysql_secure_installation
#
# Follow prompts as below:
#
# Set root password? [Y/n] y
# Remove anonymous users? [Y/n] y
# Disallow root login remotely? [Y/n] y
# Remove test database and access to it? [Y/n] y
# Reload privilege tables now? [Y/n] y
#
# Now login and create users/tables etc (all from MySQL prompt)
mysql -u root -p
CREATE DATABASE `nextcloud_db`;
CREATE USER `next_dba`@`localhost` IDENTIFIED BY 'your_password';
GRANT ALL ON nextcloud_db.* TO `next_dba`@`localhost`;
FLUSH PRIVILEGES;
exit;
